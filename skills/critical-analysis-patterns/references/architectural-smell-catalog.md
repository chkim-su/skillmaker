# Architectural Smell Catalog

프로젝트에서 발견할 수 있는 "아키텍처 냄새" 카탈로그입니다.

## Smell 1: 과도한 유사성 (Excessive Similarity)

### 증상
```
inject-workflow와 refactor-workflow의 Hook 구조가 95% 동일
├── PreToolUse: 거의 동일한 검증 로직
├── PostToolUse: 거의 동일한 상태 관리
└── 차이점: 상태 파일 이름만 다름 (.inject-* vs .refactor-*)
```

### 질문
- "왜 통합하지 않았는가?"
- "의도적 분리라면 그 이유가 문서화되어 있는가?"
- "공통 패턴을 추출할 수 있지 않은가?"

### 해결 방안
| 옵션 | 설명 |
|-----|-----|
| 통합 | 공통 워크플로우로 합치기 |
| 추출 | 공통 패턴을 별도 스킬로 분리 |
| 문서화 | 분리 이유를 명확히 기록 |

---

## Smell 2: 책임 중복 (Responsibility Overlap)

### 증상
```
duplicate-detector 에이전트: "중복 코드 감지"
knowledge-graph 스킬: "중복 패턴 식별" 언급

→ 누가 실제로 중복을 감지하는가?
```

### 질문
- "책임의 경계가 명확한가?"
- "호출자가 어떤 것을 써야 할지 혼란스럽지 않은가?"
- "둘 다 필요한가?"

### 해결 방안
1. 각 컴포넌트의 책임을 한 문장으로 정의
2. 중복 영역 제거
3. 명확한 사용 가이드 작성

---

## Smell 3: 유령 컴포넌트 (Ghost Component)

### 증상
```
agents/gateway.md
├── tools: []
├── 본문: MCP 도구 사용 방법 설명
└── 실제: 아무것도 실행하지 않음

→ 에이전트처럼 보이지만 에이전트가 아님
```

### 질문
- "이것은 에이전트인가 문서인가?"
- "어디에 있어야 하는가?"
- "Task로 호출되는가?"

### 해결 방안
- 실제 에이전트 기능 구현
- 또는 docs/references로 이동

---

## Smell 4: 과잉 복잡성 (Overcomplexity)

### 증상
```
hooks.json: 20+ 규칙
├── PreToolUse: 10개
├── PostToolUse: 8개
├── Stop: 2개
└── 실제 필요한 동작: 5개 정도
```

### 질문
- "이 복잡성이 정말 필요한가?"
- "각 Hook이 실제로 트리거되는가?"
- "YAGNI 원칙을 위반하고 있지 않은가?"

### 해결 방안
1. 각 Hook의 필요성 검증
2. 트리거되지 않는 Hook 제거
3. 유사한 Hook 통합

---

## Smell 5: 구 아키텍처 잔재 (Legacy Remnants)

### 증상
```markdown
## Important: Use Gateway Pattern (구 아키텍처)

모든 MCP 호출은 gateway를 통해야 합니다...

↑ 하지만 현재는 Data Delegation 패턴 사용
```

### 질문
- "이 문서가 현재 아키텍처를 반영하는가?"
- "새 개발자가 이것을 보면 혼란스럽지 않겠는가?"
- "언제 업데이트할 것인가?"

### 해결 방안
- 구 아키텍처 섹션 완전 제거
- 현재 아키텍처로 교체
- 마이그레이션 노트는 별도 문서로

---

## Smell 6: 암묵적 의존성 (Implicit Dependencies)

### 증상
```
에이전트 A가 에이전트 B의 출력 형식에 의존
하지만 어디에도 이 의존성이 문서화되어 있지 않음
```

### 질문
- "B가 변경되면 A가 깨지는가?"
- "이 의존성을 명시적으로 선언했는가?"
- "인터페이스 계약이 있는가?"

### 해결 방안
1. 의존성 명시적 문서화
2. 인터페이스/스키마 정의
3. 또는 의존성 제거

---

## Smell 7: 과잉 추상화 (Over-Abstraction)

### 증상
```
한 번만 사용되는 스킬이 별도 디렉토리로 분리됨
├── skills/one-time-use/
│   ├── SKILL.md
│   └── references/
└── 사용처: agents/single-agent.md 에서만 사용
```

### 질문
- "이 추상화가 재사용되는가?"
- "인라인으로 충분하지 않은가?"
- "분리의 이점이 비용을 상회하는가?"

---

## Detection Priority

| 우선순위 | Smell | 영향 |
|---------|-------|-----|
| HIGH | 책임 중복 | 사용자 혼란, 유지보수 어려움 |
| HIGH | 구 아키텍처 잔재 | 잘못된 구현 유도 |
| MEDIUM | 유령 컴포넌트 | 구조 혼란 |
| MEDIUM | 과잉 유사성 | 코드 중복, 불일치 위험 |
| LOW | 과잉 복잡성 | 유지보수 비용 |
| LOW | 과잉 추상화 | 불필요한 인디렉션 |
